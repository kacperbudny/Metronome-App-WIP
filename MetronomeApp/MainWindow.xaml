<Window x:Class="MetronomeApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MetronomeApp"
        mc:Ignorable="d"
        ResizeMode="CanMinimize"
        Title="MetronomeApp"
        SizeToContent="WidthAndHeight">
    <Grid>
        <Rectangle x:Name="OverlayRectangle"
                   Fill="Black" 
                   Stroke="Black" 
                   Panel.ZIndex="1" 
                   Opacity="0.3"
                   Visibility="Hidden"/>
        <StackPanel Orientation="Horizontal" 
                    Margin="10">
            <StackPanel x:Name="MetronomeStackPanel" 
                    Grid.Column="1">
                <Grid Margin="0,0,0,5">
                    <StackPanel HorizontalAlignment="Center" 
                            Orientation="Horizontal"  
                            Margin="0,5">
                        <Button x:Name="TempoDownButton"
                            Content="◄"
                            Style="{StaticResource changeTempoButtonsStyle}"
                            Click="TempoDownButton_Click"/>
                        <TextBox x:Name="TempoBox" 
                             Text="120" 
                             Margin="10,0"
                             PreviewTextInput="TempoBox_PreviewTextInput"
                             TextChanged="TempoBox_TextChanged"
                             FontSize="20"
                             Width="100"
                             TextAlignment="Center"
                                 PreviewKeyDown="TempoBox_PreviewKeyDown"/>
                        <Button x:Name="TempoUpButton"
                            Content="►"
                            Style="{StaticResource changeTempoButtonsStyle}"
                            Click="TempoUpButton_Click"/>
                    </StackPanel>
                </Grid>

                <Button x:Name="StartButton" 
                    Content="START"
                    FontSize="50" 
                    Click="StartButton_Click"
                    MinWidth="{Binding ActualHeight, RelativeSource={RelativeSource Self}}" 
                    MinHeight="{Binding ActualWidth, RelativeSource={RelativeSource Self}}"
                    />

                <Grid Margin="0,5,0,5">
                    <GroupBox Background="GhostWhite" 
                        BorderBrush="Silver" 
                        BorderThickness="1" 
                        Padding="10,5">
                        <GroupBox.Header>Tap Tempo</GroupBox.Header>
                        <StackPanel HorizontalAlignment="Center" 
                                Orientation="Horizontal">
                            <Button x:Name="CancelTapTempoButton"
                                Content="Cancel"
                                Style="{StaticResource defaultButtonStyle}"
                                Click="CancelTapTempoButton_Click"
                                IsEnabled="False"/>
                            <Button x:Name="TapTempoButton"
                                Content="Tap tempo"
                                Style="{StaticResource defaultButtonStyle}"
                                Click="TapTempoButton_Click"
                                Margin="5"
                                Width="120"/>
                            <Button x:Name="AcceptTapTempoButton"
                                Content="Accept"
                                Style="{StaticResource defaultButtonStyle}"
                                Click="AcceptTapTempoButton_Click"
                                IsEnabled="False"/>
                        </StackPanel>
                    </GroupBox>
                </Grid>

                <Grid>
                    <GroupBox Background="GhostWhite" 
                        BorderBrush="Silver" 
                        BorderThickness="1" 
                        Padding="10,5"
                        Width="{Binding ActualWidth, ElementName=MetronomeStackPanel}">
                        <GroupBox.Header>Timer</GroupBox.Header>
                        <StackPanel>
                            <StackPanel HorizontalAlignment="Center" 
                                Orientation="Horizontal"
                                x:Name="TimerStackPanel">
                                <Button x:Name="TimerDownButton"
                                    Content="-"
                                    Style="{StaticResource defaultButtonStyle}"
                                    Width="{Binding ActualHeight, RelativeSource={RelativeSource Self}}" 
                                    Click="TimerDownButton_Click"/>
                                <Label x:Name="TimerLabel" 
                                   x:FieldModifier="public"
                                   Content="01:00"
                                   Style="{StaticResource labelStyle}"
                                   Margin="5,0"/>
                                <Button x:Name="TimerUpButton"
                                    Content="+"
                                    Style="{StaticResource defaultButtonStyle}"
                                    Width="{Binding ActualHeight, RelativeSource={RelativeSource Self}}" 
                                    Click="TimerUpButton_Click"/>
                            </StackPanel>
                            <StackPanel x:Name="TimerButtonsStackPanel"
                                    HorizontalAlignment="Center" 
                                    Orientation="Horizontal">
                                <Button x:Name="StartTimerButton"
                                    Content="Start timer"
                                    Margin="0,5,5,0"
                                    Style="{StaticResource defaultButtonStyle}"
                                    Click="StartTimerButton_Click" />
                                <Button x:Name="ResetTimerButton"
                                    Content="Reset timer"
                                    Margin="0,5,0,0"
                                    Style="{StaticResource defaultButtonStyle}"
                                    Click="ResetTimerButton_Click"
                                    IsEnabled="False"/>
                            </StackPanel>
                        </StackPanel>
                    </GroupBox>
                </Grid>

            </StackPanel>

            <Grid Margin="10,0,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Button x:Name="AddExerciseButton"
                            Content="Add exercise" 
                            Click="AddExerciseButton_Click"
                            Style="{StaticResource gridButtonsStyle}"
                            Grid.Column="0"
                            Grid.Row="0"/>
                <Button x:Name="EditExerciseButton"
                            Content="Edit exercise" 
                            Click="EditExerciseButton_Click"
                            Style="{StaticResource gridButtonsStyle}"
                            Grid.Column="2"
                            Grid.Row="0"
                            IsEnabled="False"/>
                <Button x:Name="DeleteExerciseButton"
                            Content="Delete exercise" 
                            Click="DeleteExerciseButton_Click"
                            Style="{StaticResource gridButtonsStyle}"
                            Grid.Column="4"
                            Grid.Row="0"
                        IsEnabled="False"/>
                <Button x:Name="RefreshButton"
                            Content="Refresh list" 
                            Click="RefreshButton_Click"
                            Style="{StaticResource gridButtonsStyle}"
                            Grid.Column="6"
                            Grid.Row="0"/>

                <Grid Grid.Column="0"
                      Grid.ColumnSpan="7"
                         Grid.Row="1" 
                      Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="SearchBox" 
                         Padding="5,0"
                             VerticalContentAlignment="Center"
                             Height="36"
                             TextChanged="SearchBox_TextChanged">
                    </TextBox>
                    <TextBlock IsHitTestVisible="False" 
                               Text="Search..." 
                               VerticalAlignment="Center" 
                               HorizontalAlignment="Left" 
                               Margin="10,0,0,0" 
                               Foreground="DarkGray"
                               >
                        <TextBlock.Style>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Text, ElementName=SearchBox}" Value="">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>

                    <ComboBox Grid.Column="1"
                              Margin="10,0,0,0"
                              Name="ExercisesCategoriesComboBox"
                              Text="All exercices"
                              FontSize="16"
                              VerticalContentAlignment="Center"
                              HorizontalContentAlignment="Center"
                              Padding="10,0"
                              Width="250"
                              SelectionChanged="ExercisesCategoriesComboBox_SelectionChanged">
                        <ComboBoxItem>
                            <TextBlock Text="All exercices"/>
                        </ComboBoxItem>
                        <ComboBoxItem>
                            <TextBlock Text="Exercices in session mode"/>
                        </ComboBoxItem>
                    </ComboBox>
                </Grid>

                <ListView x:Name="ExercisesListView"
                    Margin="0,10,0,10"
                              Grid.Row="2"
                              Grid.ColumnSpan="7"
                          Width="700"
                          MouseDoubleClick="ExercisesListView_MouseDoubleClick"
                          SelectionChanged="ExercisesListView_SelectionChanged">
                    <ListView.View>
                        <GridView x:Name="ExercisesGridView">
                            <GridViewColumn Width="0"
                                            x:Name="ButtonsColumn">
                                <GridViewColumn.HeaderContainerStyle>
                                    <Style TargetType="{x:Type FrameworkElement}">
                                        <Setter Property="IsHitTestVisible" Value="False"/>
                                    </Style>
                                </GridViewColumn.HeaderContainerStyle>
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate x:Name="ButtonsDataTemplate">
                                        <DockPanel>
                                            <Button x:Name="ListDownButton"
                                                    Content="▼"
                                                    Padding="2,0"
                                                    Margin="0,0,5,0"
                                                    Click="ListDownButton_Click"/>
                                            <Button x:Name="ListUpButton"
                                                    Content="▲"
                                                    Padding="2,0"
                                                    Click="ListUpButton_Click"/>
                                        </DockPanel>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Session" 
                                            Width="Auto">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <DockPanel HorizontalAlignment="Center">
                                            <CheckBox Click="CheckBox_Click"
                                                      IsChecked="{Binding IsInSessionMode}" 
                                                      HorizontalAlignment="Center"/>
                                        </DockPanel>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Name" 
                                            Width="Auto" 
                                            DisplayMemberBinding="{Binding Name}"/>
                            <GridViewColumn Header="Tempo" 
                                            Width="Auto">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <DockPanel>
                                            <TextBlock Text="{Binding CurrentTempo}"/>
                                            <TextBlock Text="/"/>
                                            <TextBlock Text="{Binding TargetTempo}"
                                                       FontWeight="Bold"/>
                                            <TextBlock Text=" BPM"/>
                                        </DockPanel>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Practice time" 
                                            Width="Auto">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <DockPanel>
                                            <TextBlock Text="{Binding PracticeTime}"/>
                                            <TextBlock Text=" minutes"/>
                                        </DockPanel>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Notes" 
                                            Width="Auto"
                                            DisplayMemberBinding="{Binding Notes}"/>


                        </GridView>
                    </ListView.View>
                </ListView>

                <Grid Grid.ColumnSpan="7"
                      Grid.Row="3">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Button x:Name="ApplyMetronomeSettingsButton"
                                Content="Set up for selected exercise" 
                                Click="ApplyMetronomeSettingsButton_Click"
                                Style="{StaticResource gridButtonsStyle}"
                                Grid.Column="0"
                                Grid.Row="3"
                            IsEnabled="False"/>

                    <Button x:Name="StartSessionModeButton"
                                Content="Start session" 
                                FontWeight="Bold"
                                Click="StartSessionModeButton_Click"
                                Style="{StaticResource gridButtonsStyle}"
                                Grid.Column="1"
                                Grid.Row="3"
                                Margin="10,0"/>

                    <Button x:Name="SaveMetronomeSettingsIntoItemButton"
                                Content="Save current tempo into selected exercise" 
                                Click="SaveMetronomeSettingsIntoItemButton_Click"
                                Style="{StaticResource gridButtonsStyle}"
                                Grid.Column="2"
                                Grid.Row="3"
                            IsEnabled="False"/>
                </Grid>


            </Grid>


        </StackPanel>
    </Grid>
</Window>
 